<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="NoticeDAO">

  	<!-- 공지사항 등록 -->
	<insert id="insertNotice">
  		insert into notice(nno,n_title,n_content,type) 
  		values(seq_notice.nextval,#{n_title},#{n_content},#{type})
  	</insert>
  	
  	<!-- 공지사항 수정 -->
	<update id="updateNotice">
  		update notice set n_title=#{n_title},n_content=#{n_content} where nno=#{nno}
  	</update>
  	
  	<!-- 공지사항 삭제 -->
  	<update id="deleteNotice">
  		update notice set disp='n' where nno=#{nno}
  	</update>
  	
  	<!-- 리스트 뽑기 -->
  	<select id="selectNoticeList" resultType="notice">
  		select * from notice where type=#{type} and disp='y' order by nno desc
  	</select>
  	
  	<!-- 검색 -->
	<select id="getNoticeList" resultType="notice">
		select * from notice where disp='y' and 1=1 
		<if test="searchCondition=='n_title'">
			and lower(n_title) like '%'|| lower(#{searchKeyword}) ||'%' 
		</if>
		<if test="searchCondition=='n_content'">
			and upper(n_content) like '%'|| upper(#{searchKeyword}) ||'%' 
		</if>
		<if test="searchCondition=='ALL'">
			and (lower(n_title) like '%'|| lower(#{searchKeyword}) ||'%' or upper(n_content) like '%'|| upper(#{searchKeyword}) ||'%') 
		</if>
			order by nno desc
	</select>

</mapper>